<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hydroponie Automation</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    html,body{height:100%}
    /* Sky blue → white, like your reference */
    body{
      margin:0;
      background: linear-gradient(#cfe8ff 0%, #e8f2ff 45%, #ffffff 100%);
    }
    model-viewer{
      width:100%; height:100%;
      display:block; background: transparent; /* let the gradient show */
      border-radius:0; overflow:hidden;
    }
  </style>
</head>
<body>
  <model-viewer
    src="assets/models/test-v2.glb?v=5"
    ios-src="assets/models/test-v2.usdz?v=5"
    camera-controls
    /* front-ish view, reduced perspective */
    camera-orbit="0deg 90deg 3.1m"
    field-of-view="20deg"
    min-field-of-view="18deg"
    max-field-of-view="30deg"
    /* softer, neutral light so grays stay gray */
    environment-image="neutral"
    exposure="0.8"
    shadow-intensity="0.5"
    shadow-softness="0.9"
    touch-action="pan-y">
  </model-viewer>

  <script type="module">
    // Optional: recolor by material names if they exist
    const mv = document.querySelector('model-viewer');
    mv.addEventListener('load', () => {
      const mats = mv.model?.materials || [];
      const gray = [0.72, 0.74, 0.78, 1];   // frame
      const white= [0.96, 0.96, 0.96, 1];   // pipes / trays
      mats.forEach(m => {
        const n = (m.name||'').toLowerCase();
        const p = m.pbrMetallicRoughness;
        if (/(frame|support|structure|metal|beam|bar)/.test(n)) {
          p.setBaseColorFactor(gray); p.setMetallicFactor(0); p.setRoughnessFactor(0.6);
        } else if (/(pipe|pvc|tube|tray|deck|plate)/.test(n)) {
          p.setBaseColorFactor(white); p.setMetallicFactor(0); p.setRoughnessFactor(0.35);
        }
      });
      // If your GLB has only one material, give the frame & pipes distinct materials in Blender
      // (e.g., "Frame" and "PVC") and re-export—then this script will pick them up automatically.
    });
  </script>
</body>
</html>
